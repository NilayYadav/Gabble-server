import { FaceDetector } from 'expo-face-detector';

const handleTakePicture = async () => {
  if (cameraRef.current) {
    const photo = await cameraRef.current.takePictureAsync();
    const options = { mode: FaceDetector.Constants.Mode.fast };
    const result = await FaceDetector.detectFacesAsync(photo.uri, options);

    if (!photo.cancelled && result.faces.length > 0) {
      const response = await fetch(photo.uri);
      const blob = await response.blob();
      const filename = photo.uri.substring(photo.uri.lastIndexOf('/') + 1);
      const ref = firebase.storage().ref().child(filename);
      const snapshot = await ref.put(blob);
      const url = await snapshot.ref.getDownloadURL();
      console.log(url)
      navigation.navigate('addpost', { post: url });
    } else {
      alert("No human face detected. Please try again.");
    }
  }
}
